# Ansible Роль: `infra/manage-groups`

## Назначение:
Роль предназначена для управления группами в Linux-системах: создания, обновления, удаления, проверки конфликтов GID и логирования событий. Поддерживает как обычные, так и системные группы.

### Статус реализации

| Возможность                          | Статус                      |
|--------------------------------------|-----------------------------|
| Создание групп                       |       Работает              |
| Удаление групп                       |       Работает              |
| Проверка существования               |       Работает              |
| Автоматический выбор свободного GID  |       Работает              |
| Логирование действий                 |       Работает              |
| Защита от GID < 1000 без разрешения  |       Работает              |
| Конфликт GID (проверка)              |       Работает              |

## Требуемые модули:
- Ansible Core = 2.14.8
- Proxmox VE 8.2.2 
- Python 3.11.2 на Ansible контроллере

## Таблица ключей из словаря `group_list`
| Ключ                     | Тип     | Описание                                                                 |
|--------------------------|---------|--------------------------------------------------------------------------|
| `name`                   | string  | Название группы                                                          |
| `state`                  | string  | `present` или `absent` — создать/удалить группу                          |
| `gid`                    | int     | GID для группы. Если не задан — будет найден автоматически               |
| `system`                 | bool    | Является ли группа системной (использует GID < 1000)                     |
| `group_allow_system_gid` | bool    | Разрешить использование GID < 1000                                       |
| `group_gid_map`          | dict    | Отображение `name → gid`, если требуется задать GID извне                |
| `group_check_gid`        | bool    | Проверять конфликты GID (по умолчанию: `true`)                           |
| `group_log_enabled`      | bool    | Включить логирование через `shared/log-events` (по умолчанию: `true`)    |

### Подробный [пример использования ключей и переменных](../../../docs/text/manage-groups/example_use_keys.md)
