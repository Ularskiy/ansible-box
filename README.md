# О проекте
> Данный репозиторий представляет собой коллекцию Ansible-ролей, написанных для автоматизации развертывания и конфигурации IT - инфраструктуры.       

При написании перечисленных ролей, я хотел написать переиспользуемые и модульные роли для решения стандартных задач администрирования IT - инфраструктуры.
Проект будет дополняться, улучшаться по мере моего профессионального роста. А пока предлагаю ознакомиться с уже реализованными ролями. К каждой из них предоставляется документация (если ее нет, значит она в процессе написания)

**Для обратной связи: ugray.sxe@gmail.com**

# Оглавление репозитория
+ [Роль для настройки пользователей](./roles/infra/manage-users/)     
+ [Роль для настройки группы](./roles/infra/manage-groups/)  
+ [Роль для настройки SSH](./roles/infra/manage-users/)  
+ [Роль для настройки репозиториев](./roles/infra/fix-repository/)
+ [Роль для настройки дисков](./roles/infra/manage-disks/)
+ [Роль для управления виртуальными машинами в Proxmox](./roles/infra/proxmox-cloud-init-vm/)



# Структура репозитория ansible-box

```text
ansible-box/
│
├── examples                     # Пример для ознакомления
│
├── ansible.cfg_template         # Конфигурация Ansible (инвентарь, роли, пользователь)
│
├── .vault_pass.txt_template     # Пароль который используется для ssh в роли roles/infra/proxmox-cloud-init-vm
│
├── inventory/                   # Инвентарь хостов (разделён по окружениям)
│   ├── production/
│   │   └── .gitkeep
│   └── testing/
│       ├──  fix-repository
│       │    ├── hosts.ini              # Перечисленные хосты
│       │    └── fix_playbook.yml       # Данные
│       ├──  manage-disks
│       │    └──  hosts.ini             # Перечисленные хосты
│       ├── manage-groups
│       │    ├── hosts.ini              # Перечисленные хосты
│       │    └── groups_list.yml        # Данные
│       ├── manage-ssh
│       │    ├── hosts.ini              # Перечисленные хосты
│       │    └── ssh_list.yml           # Данные
│       ├── manage-users
│       │    ├── hosts.ini              # Перечисленные хосты
│       │    ├── user_list.yml          # Данные
│       │    └── user_list.yml_bakcup   # Данные
│       │   
│       ├── node-exporter
│       │    ├── hosts.ini              # Перечисленные хосты
│       │    └── node-exporter.yml      # Данные
│       │
│       └── proxmox
│            ├── hosts.ini                                # Перечисленные хосты
│            ├── vault_proxmox-cloud-init-vm_template     # Пароли
│            ├── vm_list.yml                              # Данные  
│            └── vm_list.yml_backup                       # Данные
│
│
├── vars                         # Переменные для конкретного плейбука
│   └── .gitkeep
├── group_vars/                  # Переменные для групп хостов 
│   └── .gitkeep                 
├── host_vars/                   # Переменные для конкретных хостов
│   └── .gitkeep  
├── playbooks/                      # Плейбуки (сценарии запуска)
│   ├── audit_disk.yml              # Собирает информации по дискам для анализа и дальнейшего использования в manage-disks.yml
│   ├── fix-repository.yml          # Плейбук для фикса репозиториев
│   ├── manage-disks.yml            # Плейбук для настройки диска
│   ├── manage-ssh.yml              # Плейбук для настройки SSH
│   ├── node-exporter.yml           # Плейбук для развертывания node-exporte на конечном хосте
│   ├── proxmox-cloud-init-vm.yml   # Развертывает виртуальные машины в Proxmox
│   ├── reboot_server.yml           # Перезагружает виртуальные машины
│   └── reset_password.yml          # Cбрасывает пароли
│
│   
├── roles/                           # Ansible-роли (по логике)
│   ├── infra/                       # Инфраструктурные роли (сеть, ssh, пакеты)
│   │   ├── fix-repository           # Роль для фикса репозиториев, скачивает из указанной шары и настраивает его на конечном хосте.
│   │   ├── manage-disks             # Роль для настройки дисков на конечном хосте: pvs, vgs. lvs. Может создать, увеличить и рассширить.
│   │   ├── manage-groups            # Роль для настройки группы на конечном хосте.
│   │   ├── manage-ssh               # Роль для настройки ssh на конечном хосте.
│   │   ├── manage-users             # Роль для настройки пользователя на конечном хосте.
│   │   └── proxmox-cloud-init-vm    # Роль для развертывания виртуальной машины в Proxmox
│   ├── deploy/                      # Роли деплоя приложений
│   │   └── .gitkeep
│   ├── monitoring
│   │   └── node-exporter            # Развертывает node-exporter, используется композиция ролей.
│   └── shared/                      # Общие роли (логи и т.д.)
│       └── log-events               # Роль для логирования запуска других ролей
│              
├── templates/                   # Jinja2-шаблоны конфигураций
│   └── .gitkeep
│
├── files/                       # Статичные файлы (копируются как есть)
│   └── .gitkeep
│
├── library                      # Для собственных самописанных модулей
│    └── .gitkeep
│
├── LICENSE                      # Лицензия проекта
│
└── README.md                    # Главное описание проекта
```

